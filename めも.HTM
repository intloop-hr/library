<meta charset=UTF-8>
<meta name=viewport content=width=device-width>
<title>フォーム送信とアラート表示</title>
<form action=https://example.com/submit method=POST>
	<label for=name>名前:</label>
	<input type=text id=name name=name required>
	<br>
	<input type=submit value=送信>
</form>
<script type=module>
    const[form]=document.forms
    while(true){
        const{resolve,promise}=Promise.withResolvers()
        form.addEventListeners('submit',resolve)
        await promise
		event.preventDefault()

		const formData=new FormData(form)
		try{
			const response = await fetch(form.action,{
				method: form.method,
				body: formData
			})
			const text = await response.text()
			alert(text)
		} catch (error) {
			alert('送信に失敗しました: '+error)
		}
	}
</script>